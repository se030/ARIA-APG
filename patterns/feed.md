# [Feed Pattern](https://www.w3.org/WAI/ARIA/apg/patterns/feed/)

Feed는 유저의 스크롤 동작에 따라 자동으로 새로운 컨텐츠를 로드하는 페이지 영역입니다. 피드의 컨텐츠 영역은 [article](https://w3c.github.io/aria/#article) 요소로 표현됩니다. 즉, 피드는 일반적으로 무한 스크롤을 지원하는 아티클의 동적 리스트라고 생각할 수 있겠습니다.

[Grid](https://www.w3.org/WAI/ARIA/apg/patterns/grid/)와 같이 유저 스크롤에 따른 데이터 로딩을 지원하는 다른 ARIA 패턴들과 피드의 가장 큰 차이는, 피드는 **구조**이지 위젯이 아니라는 점입니다.

따라서 읽기 모드를 가진 스크린 리더와 같은 보조 기술은 피드 컨텐츠와 상호작용할 때 읽기 모드를 기본값으로 가집니다. 하지만 대부분의 다른 WAI-ARIA 구조들과 피드는 웹 페이지와 보조 기술 사이에 상호 운용 계약을 설립한다는 점에서 차이가 있습니다. 이 계약으로 보조 기술 유저가 읽기 모드에서 아티클을 읽고, 앞이나 뒤로 이동하고, 새 아티클을 로드할 수 있도록 스크롤 상호작용이 관리됩니다.

쇼핑 사이트의 상품 페이지에 한번에 다섯개의 연관 상품을 보여주는 섹션이 있다고 생각해봅시다. 유저가 스크롤을 하면, 더 많은 상품이 요청되고 DOM에 로드 될 것입니다. 다음 상품 다섯개를 로드하는 버튼을 제공하는 정적인 디자인과는 달리, 사용자의 스크롤 동작에 따라 자동으로 데이터를 추가 로드하는 동적 구현은 더 단순하고 빠른 사용자 경험을 제공합니다. 그러나 웹 페이지가 스크롤 이벤트를 통해 동적으로 컨텐츠를 로드하는 경우, 아쉽게도 보조 기술 사용자들에게는 사용성과 상호운용성에 어려움을 가져올 수 있습니다.

<br />

피드 패턴은 보조 기술에 안정적인 읽기 모드 상호작용을 가능하게 합니다. 이를 위해 웹 페이지와 보조 기술 간에 다음과 같은 상호 운용 계약을 설립합니다:

1. 피드 컨텍스트 내에서 **웹 페이지 코드**는 다음과 같은 책임을 가집니다:

   - DOM focus를 가진 아티클에 기반한 적절한 시각적 스크롤 기능

   - DOM focus를 가진 아티클에 기반한 피드 아티클의 로드와 제거

2. 피드 컨텍스트 내에서 **읽기 모드를 지원하는 보조 기술**은 다음과 같은 책임을 가집니다:

   - 아티클 또는 그 하위 요소에 DOM focus가 있음을 보장해 읽기 커서가 위치한 아티클을 표시

   - 다음 또는 이전 아티클로 DOM focus를 이동시키는 읽기 모드 키를 지원

   - 읽기 커서와 DOM focus를 현재 피드의 끝 또는 시작 지점 너머로 이동시킬 수 있는 읽기 모드 키를 지원

피드 패턴은 스크린 리더가 컨텐츠를 읽고 읽기 모드를 유지하면서 추가 로딩을 트리거할 수 있도록 합니다.

<br />

피드 패턴의 또 다른 특징은 보조 기술 사용자들에게 통독을 지원한다는 것입니다. 웹 페이지 개발자는 각 아티클에 대한 accessible name과 description을 제공할 수 있습니다. 보조 기술은 아티클에서 제목과 주요 내용을 포함하는 하위 요소를 식별함으로써 사용자가 아티클 간에 빠르게 이동하고 어떤 것이 관심사를 포함하는지 효율적으로 판단할 수 있게 합니다.

<br />

### 키보드 상호작용

피드 패턴은 특정한 GUI 위젯으로 구현되지 않기 때문에 체계적인 키보드 컨벤션은 없습니다. 다음의 또는 유사한 인터페이스가 권장됩니다.

피드 내부에 포커스가 있을 떄:

- `Page Down`: 다음 아티클로 포커스를 이동합니다.

- `Page Up`: 이전 아티클로 포커스를 이동합니다.

- `Control + End`: 피드 다음에 오는 첫번째 focusable 요소로 포커스를 이동합니다.

- `Control + Home`: 피드 이전에 오는 첫번째 focusable 요소로 포커스를 이동합니다.

> Note
>
> 1. 컨벤션이 부족하기 때문에 쉽게 찾을 수 있는 키보드 조작 인터페이스 문서를 제공하는 것이 중요합니다.
> 2. 피드 내부에 피드가 중첩된 경우가 있을 수 있습니다. 예를 들어 SNS 피드의 아티클은 해당 게시물에 대한 댓글의 피드를 포함하기도 합니다. 유저가 중첩 피드를 탐색하기 위해서는 우선 포커스를 해당 피드 내부로 옮겨야 합니다. 중첩 피드 탐색을 지원하는 옵션은 다음과 같습니다:
>    - `Tab` 키를 사용해 중첩 피드 내부로 포커스를 이동할 수 있습니다. 아티클이 많은 링크, 버튼 등 tabbable 위젯을 포함한다면 번거로운 작업일 수 있습니다.
>    - `Alt + Page Down` 등 바깥 피드의 아티클에서 안쪽 피드의 첫번째 아이템으로 포커스를 이동시키는 키를 제공합니다.
>    - `Control + End` 키를 사용해 바깥 피드의 다음 아티클로 포커스를 이동시켜 탐색을 계속할 수 있습니다.
> 3. 드물지만 피드 아티클이 앞서 언급된 키들을 사용하는 위젯을 포함하고 있는 경우 피드 탐색 키는 해당 위젯을 동작시킵니다. 따라서 이 키들을 사용하지 않는 요소로 포커스를 이동한 뒤 피드를 탐색할 수 있습니다.

<br />

### WAI-ARIA Roles, States, Properties

- 아티클 목록을 포함하는 요소에는 `role="feed"`를 설정합니다.

- 피드가 명시적인 라벨을 가진다면, 피드 요소는 해당 제목을 포함하는 요소 id를 `aria-labelledby` 속성값으로 가집니다. 아닌 경우, `aria-label`로 라벨링합니다.

<br />

- 컨텐츠를 포함하는 각 유닛은 `role="article"`을 가집니다. 피드 내 컨텐츠에는 `<article>` 요소를 사용합니다.

- 각 아티클 요소는

  - 식별자 라벨의 역할을 가진 요소의 id를 `aria-labelledby` 속성값으로 가집니다.

  - `aria-describedby` 속성에 주요 컨텐츠를 가진 요소 또는 요소를 명시할 것을 권장합니다.

  - `aria-posinset` 속성을 통해 피드에서의 위치를 나타냅니다.

  - `aria-setsize` 속성값으로 로드된, 또는 피드 전체 아티클 총 개수 중 더 유용하다고 판단되는 값을 가집니다. 전체 개수가 정해지지 않았다면 -1의 값을 가질 수 있습니다.

- 아티클 요소들이 DOM에 추가되거나 제거될 때, 또 작업에 여러번의 DOM 조작이 필요하다면, 업데이트 작업이 진행되는 동안 feed 요소에 'aria-busy="true"'를 설정합니다.

  **변경 작업이 완료되었을 때 `aria-busy`를 false로 변경하는 것이 매우 중요합니다.** 그렇지 않다면 변경된 피드 내용이 보조 기술에 제공되지 않을 수 있습니다.
